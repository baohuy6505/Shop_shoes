<div class="container-fluid py-4">
    <h2 class="mb-4 text-primary"><i class="fas admin-order-list-icon me-2"></i> Danh sách Đơn hàng Chờ Xác nhận</h2>

    {{#unless orders.length}}
        <div class="alert alert-info text-center">
            <i class="fas fa-box-open me-2"></i>Hiện tại không có đơn hàng mới nào cần xác nhận.
        </div>
    {{/unless}}

    {{#if orders.length}}
    <div class="card shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover table-striped mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th scope="col" class="py-3">Mã ĐH</th>
                            <th scope="col" class="py-3">Ngày đặt</th>
                            <th scope="col" class="py-3">Khách hàng</th>
                            <th scope="col" class="py-3">Tổng tiền</th>
                            <th scope="col" class="py-3">Trạng thái</th>
                            <th scope="col" class="py-3">Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each orders}}
                        <tr>
                            <td class="align-middle"><strong>#{{this._id}}</strong></td>
                            
                            <td class="align-middle">
                                <span>{{formatDate this.createdAt}}</span>
                            </td>
                            
                            <td class="align-middle">
                                <span class="d-block fw-bold">{{this.userId.username}}</span>
                                <span class="text-muted small">{{this.userId.email}}</span>
                            </td>
                            
                            <td class="align-middle text-success fw-bold">
                                {{formatCurrency this.totalPrice}}
                            </td>
                            
                            <td class="align-middle">
                                <span class="badge bg-warning text-dark">{{this.status}}</span>
                            </td>
                            
                            <td class="align-middle">
                                <form action="/Admin/Home/orders/confirm/{{this._id}}" method="POST" style="display:inline;">
                                    <button 
                                        type="submit" 
                                        class="btn btn-sm btn-success me-2"
                                        onclick="return confirm('Bạn có chắc chắn muốn xác nhận và trừ tồn kho đơn hàng này không?')"
                                        title="Xác nhận đơn hàng"
                                    >
                                        <i class="fas fa-check"></i> Xác nhận
                                    </button>
                                </form>
                                <form action="/Admin/Home/orders/delete/{{this._id}}" method="POST" style="display:inline;">
                                    <button 
                                        type="submit" 
                                        class="btn btn-sm btn-danger me-2"
                                        onclick="return confirm('Bạn có chắc chắn muốn xóa đơn hàng này không?')"
                                        title="Xác nhận đơn hàng"
                                    >
                                        <i class="fas fa-check"></i> Từ chối 
                                    </button>
                                </form>
                                <a href="/admin/orders/detail/{{this._id}}" class="btn btn-sm btn-info" title="Xem chi tiết đơn hàng">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {{/if}}
</div>