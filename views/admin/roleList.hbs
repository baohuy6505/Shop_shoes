<div class="container mt-5">
  <h2 class="mb-4">Quản lý quyền người dùng</h2>

  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th>Tên người dùng</th>
        <th>Email</th>
        <th>Quyền hiện tại</th>
        <th>Thay đổi quyền</th>
      </tr>
    </thead>
    <tbody>
      {{#each users}}
      <tr>
        <td>{{this.username}}</td>
        <td>{{this.email}}</td>
        <td>
          <span class="badge 
            {{#if (eq this.role "admin")}}bg-danger
            {{else if (eq this.role "manager")}}bg-warning
            {{else}}bg-secondary{{/if}}">
            {{this.role}}
          </span>
        </td>
        <td>
          <form action="/admin/role/update" method="POST" class="d-flex align-items-center">
            <input type="hidden" name="userId" value="{{this._id}}" />

            <select name="role" class="form-select form-select-sm w-auto me-2">
              <option value="user" {{if (eq this.role "user") "selected"}}>User</option>
              <option value="manager" {{if (eq this.role "manager") "selected"}}>Manager</option>
              <option value="admin" {{if (eq this.role "admin") "selected"}}>Admin</option>
            </select>

            <button type="submit" class="btn btn-sm btn-primary">Cập nhật</button>
          </form>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</div>
